<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .highcharts-figure,
.highcharts-data-table table {
    min-width: 310px;
    max-width: 800px;
    margin: 1em auto;
}

.highcharts-description {
    margin: 0 10px;
}

.highcharts-data-table table {
    font-family: Verdana, sans-serif;
    border-collapse: collapse;
    border: 1px solid #ebebeb;
    margin: 10px auto;
    text-align: center;
    width: 100%;
    max-width: 500px;
}

.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}

.highcharts-data-table th {
    font-weight: 600;
    padding: 0.5em;
}

.highcharts-data-table td,
.highcharts-data-table th,
.highcharts-data-table caption {
    padding: 0.5em;
}

.highcharts-data-table thead tr,
.highcharts-data-table tbody tr:nth-child(even) {
    background: #f8f8f8;
}

.highcharts-data-table tr:hover {
    background: #f1f7ff;
}

#button-bar {
    min-width: 310px;
    max-width: 800px;
    margin: 0 auto;
}

.highcharts-demo-button {
    background: #f2f2f2;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
    font-size: 0.8rem;
    padding: 0.5rem 1.5rem;
    margin: 0.5rem -5px 0.5rem 10px;
    transition: background 250ms;
}

.highcharts-demo-button:hover {
    background: #e6e6e6;
}


.highcharts-credits{
    display: none;
}

.highcharts-data-table-0 thead tr:first-child{
    content: "gola";
}

    </style>
</head>
<body>
    
    <script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">

    </p>
</figure>

<div id="button-bar">
    <button id="small" class="highcharts-demo-button">Club de niñas</button>
</div>


<script>

    const url = "https://script.google.com/macros/s/AKfycbyAWFzDx7hcADbSE1D-rAT5AQgCKWqtS5TA_Fazb466-JAsoge1TQDXFdkJPxAWCMon/exec";

    function getGeneral(){
        fetch(url)
       .then(response => {
            if (!response.ok) {
            throw new Error(`Error HTTP: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            console.log('Datos obtenidos:', data );
            chartController(data)
        })
        .catch(error => {
            console.error('Hubo un problema con la petición fetch:', error);
        });
    }

    function orderData(nameList, valueList){
        let data = [];

        nameList.forEach( (itemName, index) => {
            itemData = {
                name:nameList[index],
                data: [+valueList[index]]
            }

            data.push(itemData)
        });

        console.log(data)
        
        return data;
    }
    function orderDataCategory(categoryList,nameList, valueList){
        let data = [];

        categoryList.forEach( (itemName, index) => {
            itemData = {
                name:nameList[index],
                data: [+valueList[index]]
            }

            data.push(itemData)
        });

        console.log(data)
        
        return data;
    }

    let categorias = ['2025']


    function chartController(useData){
            const chart = Highcharts.chart('container', {

            chart: {
                type: 'column'
            },

            title: {
                text: 'Reporte General'
            },

            subtitle: {
                text: '2025'
            },

            legend: {
                align: 'right',
                verticalAlign: 'middle',
                layout: 'vertical'
            },

            xAxis: {
                categories: categorias,
                labels: {
                    x: -10
                }
            },

            yAxis: {
                allowDecimals: false,
                title: {
                    text: 'Indicadores'
                }
            },
            plotOptions: {
                series: {
                    borderWidth: 0,
                    dataLabels: {
                        enabled: true,
                    }
                }
            },


            series: 
            orderData(useData.indicadoresGeneralesName,
            useData.indicadoresGeneralesValue),

            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 500
                    },
                    chartOptions: {
                        legend: {
                            align: 'center',
                            verticalAlign: 'bottom',
                            layout: 'horizontal'
                        },
                        yAxis: {
                            labels: {
                                align: 'left',
                                x: 0,
                                y: -5
                            },
                            title: {
                                text: null
                            }
                        },
                        subtitle: {
                            text: null
                        },
                        credits: {
                            enabled: false
                        }
                    }
                }]
            }
        });
        
    }

    document.getElementById('small').addEventListener('click', function () {
        categorias = ['2025','2024']
        chartController(useData);
    });
    
    getGeneral()

    

</script>
</body>
</html>